(this["webpackJsonpex-2-phonebook"]=this["webpackJsonpex-2-phonebook"]||[]).push([[0],{21:function(e,n,t){},4:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var o=t(16),c=t.n(o),u=(t(21),t(7)),a=t(3),r=t(1),i=t(5),l=t.n(i),s="http://localhost:3001/rest/people",h={getAll:function(){return l.a.get(s)},create:function(e){return l.a.post(s,e)},deleteByID:function(e){return l.a.delete("".concat(s,"/").concat(e))},updatePhoneNumber:function(e,n){return l.a.put("".concat(s,"/").concat(e),n)}},b=(t(4),t(0)),j=function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("label",{htmlFor:e.id,children:"Filter"}),Object(b.jsx)("input",{value:e.value,onChange:e.onChange,onFocus:e.onFocus,id:e.id})]})},d=function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Add new phonebook entry"}),Object(b.jsxs)("form",{onSubmit:e.onSubmit,className:"form",children:[Object(b.jsx)("label",{htmlFor:"inputName",children:"Name"}),Object(b.jsx)("input",{value:e.inputNameAttr.value,onChange:e.inputNameAttr.onChange,onFocus:e.inputNameAttr.onFocus,id:"inputName"}),Object(b.jsx)("label",{htmlFor:"inputPhoneNumber",children:"Phone"}),Object(b.jsx)("input",{value:e.inputPhoneNumberAttr.value,onChange:e.inputPhoneNumberAttr.onChange,onFocus:e.inputPhoneNumberAttr.onChange,id:"inputPhoneNumber"}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"Add"})})]})]})},m=function(e){var n=e.persons.map((function(n){return Object(b.jsxs)("li",{className:"note",children:[Object(b.jsx)("span",{children:n.name}),Object(b.jsx)("span",{className:"margin-md",children:n.phone}),Object(b.jsx)("button",{className:"delete-btn",onClick:function(){return e.onDelete(n._id)},children:"Delete"})]},n.name)}));""!==e.filter&&(n=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.filter.toLowerCase())})).map((function(n){return Object(b.jsxs)("li",{className:"note",children:[Object(b.jsx)("span",{children:n.name}),Object(b.jsx)("span",{className:"margin-md",children:n.phone}),Object(b.jsx)("button",{className:"delete-btn",onClick:function(){return e.onDelete(n.id)},children:"Delete"})]},n.name)})));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Phonebook Entries"}),Object(b.jsx)("ul",{children:n})]})},f=function(e){var n=e.message,t=e.type;return null===n||null===t?null:Object(b.jsx)("div",{className:t,children:n})},p=function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),i=Object(a.a)(c,2),l=i[0],s=i[1],p=Object(r.useState)(""),O=Object(a.a)(p,2),x=O[0],g=O[1],v=Object(r.useState)(""),N=Object(a.a)(v,2),F=N[0],w=N[1],y=Object(r.useState)(null),C=Object(a.a)(y,2),A=C[0],k=C[1],P=Object(r.useState)(null),S=Object(a.a)(P,2),D=S[0],_=S[1],T={value:l,onChange:function(e){s(e.target.value)},onFocus:function(e){s("")}},B={value:x,onChange:function(e){g(e.target.value)},onFocus:function(e){g("")}};return Object(r.useEffect)((function(){h.getAll().then((function(e){o(e.data)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Phonebook"}),Object(b.jsx)(j,{value:F,onChange:function(e){w(e.target.value)},onFocus:function(e){w("")},id:"inputFilter"}),Object(b.jsx)(d,{onSubmit:function(e){e.preventDefault();var n={name:l,phone:x};if(t.find((function(e){return e.name===l}))){if(window.confirm("".concat(l," is already added to the phonebook, replace the old number with a new one?"))){var c=t.find((function(e){return e.name===l}));h.updatePhoneNumber(c._id,Object(u.a)(Object(u.a)({},c),{},{phone:n.phone})).then((function(e){console.log(e),o(t.map((function(n){return n._id===e.data._id?e.data:n}))),k("Success update phone number for entry ".concat(e.data.name,"!")),_("success"),setTimeout((function(){k(null),_(null)}),3e3)})).catch((function(e){console.log(e),o(t.filter((function(e){return e.name!==n.name}))),k("".concat(c.name," has already been removed from the server!")),_("error"),setTimeout((function(){k(null),_(null)}),3e3)}))}}else h.create(n).then((function(e){o(t.concat(e.data)),s(""),g(""),k("Success add new phonebook entry!"),_("success"),setTimeout((function(){k(null),_(null)}),3e3)})).catch((function(e){console.log(e)}))},inputNameAttr:T,inputPhoneNumberAttr:B}),Object(b.jsx)(f,{message:A,type:D}),Object(b.jsx)("hr",{}),Object(b.jsx)(m,{filter:F,persons:t,onDelete:function(e){window.confirm("Are you sure you want to delete this entry?")&&(console.log("The phonebook entry with id ".concat(e," will be deleted")),h.deleteByID(e).then((function(n){o(t.filter((function(n){return n._id!==e})))})).catch((function(e){console.log(e)})))}})]})};c.a.render(Object(b.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.86fd2180.chunk.js.map